<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>操作系统学习三：进程调度与死锁-以及银行家算法避免死锁--NetCore实现 | 画星星高手 | 我想要画很多很多星星，用温暖微弱的光，照亮你的每个夜晚。</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="学习,实现,操作系统,死锁,调度,银行家,进程,避免">
    <meta name="description" content="前言这是操作系统学习的第三篇啦，关于进程调度有很多内容，操作系统在调度进程的时候最容易遇到的问题就是死锁了，银行家算法是一个典型的避免死锁算法。 死锁的概念先来了解一下死锁的基本概念：一组竞争系统资源或相互通信的进程相互的“永久”阻塞。若无外力作用，这组进程将永远不能继续执行。 看下面两幅图片，左边是可能产生死锁的状态，四辆汽车（进程）要竞争同一个资源（通过路口），如果系统调度不当，就会陷入死锁状">
<meta property="og:type" content="article">
<meta property="og:title" content="操作系统学习三：进程调度与死锁-以及银行家算法避免死锁--NetCore实现">
<meta property="og:url" content="http://blog.deali.cn/posts/1e6223ee42e53b10.html">
<meta property="og:site_name" content="画星星高手">
<meta property="og:description" content="前言这是操作系统学习的第三篇啦，关于进程调度有很多内容，操作系统在调度进程的时候最容易遇到的问题就是死锁了，银行家算法是一个典型的避免死锁算法。 死锁的概念先来了解一下死锁的基本概念：一组竞争系统资源或相互通信的进程相互的“永久”阻塞。若无外力作用，这组进程将永远不能继续执行。 看下面两幅图片，左边是可能产生死锁的状态，四辆汽车（进程）要竞争同一个资源（通过路口），如果系统调度不当，就会陷入死锁状">
<meta property="og:locale" content="cn">
<meta property="og:image" content="http://blog.deali.cn/posts/1e6223ee42e53b10/8869373-1404068f0d4e4cce.png">
<meta property="og:image" content="http://blog.deali.cn/posts/1e6223ee42e53b10/8869373-0ea9289dfe99ad54.png">
<meta property="og:image" content="http://blog.deali.cn/posts/1e6223ee42e53b10/8869373-d70abb059cda7c8a.png">
<meta property="og:image" content="http://blog.deali.cn/posts/1e6223ee42e53b10/8869373-66f8da011ee24382.png">
<meta property="og:image" content="http://blog.deali.cn/posts/1e6223ee42e53b10/8869373-3a543e2a1951d39d.png">
<meta property="og:image" content="http://blog.deali.cn/posts/1e6223ee42e53b10/8869373-b59a343c8c2f357b.png">
<meta property="article:published_time" content="2020-03-02T02:27:53.000Z">
<meta property="article:modified_time" content="2020-03-02T04:00:51.259Z">
<meta property="article:author" content="画星星高手">
<meta property="article:tag" content="学习">
<meta property="article:tag" content="实现">
<meta property="article:tag" content="操作系统">
<meta property="article:tag" content="死锁">
<meta property="article:tag" content="调度">
<meta property="article:tag" content="银行家">
<meta property="article:tag" content="进程">
<meta property="article:tag" content="避免">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.deali.cn/posts/1e6223ee42e53b10/8869373-1404068f0d4e4cce.png">
    
        <link rel="alternate" type="application/atom+xml" title="画星星高手" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu"  >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">画星星高手</h5>
          <a href="mailto:feedback@deali.cn" title="feedback@deali.cn" class="mail">feedback@deali.cn</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                存档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/Deali-Axy" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/axy12" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://zhuanlan.zhihu.com/deali" target="_blank" rel="noopener"  >
                <i class="icon icon-lg icon-address-book"></i>
                知乎专栏
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.zhihu.com/people/dealiaxy" target="_blank" rel="noopener"  >
                <i class="icon icon-lg icon-address-card"></i>
                知乎主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://live.bilibili.com/11883038" target="_blank" rel="noopener"  >
                <i class="icon icon-lg icon-tv"></i>
                直播间
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">操作系统学习三：进程调度与死锁-以及银行家算法避免死锁--NetCore实现</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">操作系统学习三：进程调度与死锁-以及银行家算法避免死锁--NetCore实现</h1>
        <h5 class="subtitle">
            
                <time datetime="2020-03-02T02:27:53.000Z" itemprop="datePublished" class="page-time">
  2020-03-02
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E7%BC%96%E7%A8%8B/">编程</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#前言"><span class="post-toc-number">1.</span> <span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#死锁的概念"><span class="post-toc-number">2.</span> <span class="post-toc-text">死锁的概念</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#产生死锁的原因"><span class="post-toc-number">3.</span> <span class="post-toc-text">产生死锁的原因</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#产生死锁的条件"><span class="post-toc-number">4.</span> <span class="post-toc-text">产生死锁的条件</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#银行家算法"><span class="post-toc-number">5.</span> <span class="post-toc-text">银行家算法</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#主要思想"><span class="post-toc-number">6.</span> <span class="post-toc-text">主要思想</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#举例"><span class="post-toc-number">7.</span> <span class="post-toc-text">举例</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#进一步理解"><span class="post-toc-number">8.</span> <span class="post-toc-text">进一步理解</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#算法实现"><span class="post-toc-number">9.</span> <span class="post-toc-text">算法实现</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#安全性测试算法"><span class="post-toc-number">10.</span> <span class="post-toc-text">安全性测试算法</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#实现代码"><span class="post-toc-number">11.</span> <span class="post-toc-text">实现代码</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#运行结果"><span class="post-toc-number">12.</span> <span class="post-toc-text">运行结果</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#欢迎交流"><span class="post-toc-number">13.</span> <span class="post-toc-text">欢迎交流</span></a></li></ol>
        </nav>
    </aside>


<article id="post-ea5aa81dbdff99bfa4186accc460ce9f"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">操作系统学习三：进程调度与死锁-以及银行家算法避免死锁--NetCore实现</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-03-02 10:27:53" datetime="2020-03-02T02:27:53.000Z"  itemprop="datePublished">2020-03-02</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E7%BC%96%E7%A8%8B/">编程</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>这是操作系统学习的第三篇啦，关于进程调度有很多内容，操作系统在调度进程的时候最容易遇到的问题就是死锁了，<strong>银行家算法</strong>是一个典型的避免死锁算法。</p>
<h2 id="死锁的概念"><a href="#死锁的概念" class="headerlink" title="死锁的概念"></a>死锁的概念</h2><p>先来了解一下死锁的基本概念：<strong>一组竞争系统资源或相互通信的进程相互的“永久”阻塞。若无外力作用，这组进程将永远不能继续执行。</strong></p>
<p>看下面两幅图片，左边是可能产生死锁的状态，四辆汽车（进程）要竞争同一个资源（通过路口），如果系统调度不当，就会陷入死锁状态，如右图<em>（每辆车占据一个车道（资源），所需车道（资源）被另一辆车占据。）</em>。</p>
<img src="/posts/1e6223ee42e53b10/8869373-1404068f0d4e4cce.png" class="">


<h2 id="产生死锁的原因"><a href="#产生死锁的原因" class="headerlink" title="产生死锁的原因"></a>产生死锁的原因</h2><p>产生死锁的原因主要有两点：</p>
<ul>
<li><p>资源数  &lt;  要求该种资源的进程数（资源竞争）</p>
</li>
<li><p>进程的推进顺序不恰当</p>
<p>如下图：A、B分别代表某种资源，假设都只有一个，进程P先占用了资源A，接着进程Q占用了资源B，后面进程P再想要资源B就拿不到，进程Q想要资源A也拿不到，系统就陷入死锁状态了。</p>
</li>
</ul>
<img src="/posts/1e6223ee42e53b10/8869373-0ea9289dfe99ad54.png" class="">

<p>再看看下面这个图，同样说明了进程推进顺序不恰当导致的结果：</p>
<ul>
<li>(1)、(2) 、(4) 、(5)正常运行</li>
<li>(3) 、(6)发生死锁</li>
</ul>
<img src="/posts/1e6223ee42e53b10/8869373-d70abb059cda7c8a.png" class="">

<p>修改了进程的推进顺序之后，不会陷入死锁，可以正常运行，如下图：</p>
<img src="/posts/1e6223ee42e53b10/8869373-66f8da011ee24382.png" class="">

<h2 id="产生死锁的条件"><a href="#产生死锁的条件" class="headerlink" title="产生死锁的条件"></a>产生死锁的条件</h2><ol>
<li><strong>互斥条件</strong>：进程所竞争的资源必须被互斥使用。</li>
</ol>
<p><em>互斥是资源的固有属性，不可禁止。</em></p>
<ol start="2">
<li><p><strong>请求保持条件</strong>：当前已拥有资源的进程仍能申请新的资源，当被阻塞时，对已获得的资源保持不放。</p>
</li>
<li><p><strong>不剥夺条件</strong>：进程已获得的资源只能在使用完时自行释放，而不能被抢占。</p>
</li>
<li><p><strong>环路条件</strong>：存在一个至少包含两个进程的循环等待链，链中的每个进程都正在等待下一个进程占有的资源。</p>
</li>
</ol>
<blockquote>
<ul>
<li><p>前面三个条件是必要条件，<strong>环路条件</strong>是必要条件。</p>
</li>
<li><p>第一个<strong>互斥</strong>是资源的固有属性，没办法禁止的。</p>
</li>
<li><p>只要破坏后面3个条件中的任意条件，就可以预防或者避免死锁。</p>
</li>
</ul>
</blockquote>
<h2 id="银行家算法"><a href="#银行家算法" class="headerlink" title="银行家算法"></a>银行家算法</h2><p>这是仿照银行发放贷款时采取的控制方式而设计的一种死锁避免算法。其特点是所有客户的信用额度可以超过银行的全部资本。</p>
<p>银行家算法的目标：*<em>所有客户的信用额度之和可以超过银行的全部资本，这就是杠杆。 *</em></p>
<h2 id="主要思想"><a href="#主要思想" class="headerlink" title="主要思想"></a>主要思想</h2><p>银行家算法的主要思想如下：</p>
<ol>
<li>当一个用户对资金的最大的需求量（即信用额度）不超过银行家现有的资金时就可以接纳该用户。</li>
<li>用户可以分期贷款，但贷款的总数不能超过最大需求量。 </li>
<li>当银行家现有的资金不能满足用户的尚需贷款时，对用户的贷款可推迟支付，但总能使用户在有限的时间里得到贷款。</li>
<li>当用户得到所需的全部资金后，一定能在有限的时间里归还所有资金。 （客户信用良好，都能安期还款）</li>
</ol>
<h2 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h2><blockquote>
<p>假定某银行的全部流动资金为10000元。客户A申请4000元的信用额度，客户B申请6000元的信用额度，客户C申请10000元的信用额度，由于都没有超过银行的流动资金，予以批准。客户D申请12000元的信用额度，银行拒绝。假定A、B、C来银行提出下列贷款申请：</p>
<ul>
<li>A要求贷款2000元</li>
<li>B要贷款4000元</li>
<li>C要贷款3000元</li>
</ul>
</blockquote>
<p>银行策略如下：</p>
<ol>
<li><p><strong>只要银行还有钱就发放贷款</strong></p>
<p>如果采用这种策略，发放贷款后银行剩下1000元，将无法满足任何一个客户的信用额度，从而造成银行呆账。</p>
</li>
<li><p><strong>需要考虑发放贷款后银行面临的风险（如果银行无法满足所有客户的信用额度，将导致无法收回贷款）</strong></p>
<p>如果采用这种策略，先发放A和B的贷款后银行剩下4000元，推迟支付C的贷款，剩下的4000元可以满足A或B客户的信用额度。</p>
</li>
</ol>
<h2 id="进一步理解"><a href="#进一步理解" class="headerlink" title="进一步理解"></a>进一步理解</h2><p>我们把操作系统看作是银行家，操作系统管理的资源相当于是银行家管理的资金，当进程提出资源请求时，系统检查：</p>
<ul>
<li>可利用资源数<code>Available</code>：银行流动资金</li>
<li>进程最大资源需求数<code>Max</code>：信用额度</li>
<li>已分配给进程的资源数<code>Allocation</code>：贷款</li>
<li>进程还将需要的资源数<code>Need</code>：信用额度-贷款</li>
</ul>
<p><strong>银行家算法运行的流程如下：</strong></p>
<ul>
<li>进行资源预分配</li>
<li>实施安全检测<ul>
<li>安全：真正资源分配</li>
<li>不安全：回到预分配前状态</li>
</ul>
</li>
</ul>
<img src="/posts/1e6223ee42e53b10/8869373-3a543e2a1951d39d.png" class="">

<h2 id="算法实现"><a href="#算法实现" class="headerlink" title="算法实现"></a>算法实现</h2><p>下面是银行家算法整个实现过程的流程图：</p>
<img src="/posts/1e6223ee42e53b10/8869373-b59a343c8c2f357b.png" class="">

<p><strong>实现相关数据结构的说明：</strong></p>
<p>1． 可利用资源向量Available ，它是一个含有m个元素的数组，其中的每一个元素代表一类可利用的资源的数目，其初始值是系统中所配置的该类全部可用资源数目。其数值随该类资源的分配和回收而动态地改变。如果<code>Available[j]=k</code>，表示系统中现有j类资源k个。</p>
<p>2． 最大需求矩阵Max，这是一个n×m的矩阵，它定义了系统中n个进程中的每一个进程对m类资源的最大需求。如果<code>Max[i][j]=k</code>，表示进程i需要j类资源的最大数目为k。</p>
<p>3． 分配矩阵Allocation，这是一个<code>n×m</code>的矩阵，它定义了系统中的每类资源当前分配到每一个进程的资源数。如果<code>Allocation[i][j]=k</code>，表示进程i当前已经分到j类资源的数目为k个。<code>Allocation[i]</code>表示进程i的分配向量。</p>
<p>4． 需求矩阵Need，这是一个n×m的矩阵，用以表示每个进程还需要的各类资源的数目。如果<code>Need[i][j]=k</code>，表示进程i还需要j类资源k个，才能完成其任务。<code>Need[i]</code>表示进程i的需求向量。</p>
<p><strong>上述三个矩阵间存在关系：<code>Need[i][j]=Max[i][j]-Allocation[i][j]；</code></strong></p>
<p><strong>算法过程说明</strong></p>
<p>Request是进程i的请求向量。<code>Request[j]=k</code>表示进程i请求分配j类资源k个。当进程i发出资源请求后，系统按下述步骤进行检查：</p>
<p>1． 如果<code>Request ≤Need[i]</code>，则转向步骤2；否则，认为出错，因为它所请求的资源数已超过它当前的最大需求量。</p>
<p>2． 如果<code>Request ≤Available</code>，则转向步骤3；否则，表示系统中尚无足够的资源满足进程i的申请，进程i必须等待。</p>
<p>3． 系统试探性地把资源分配给进程i，并修改下面数据结构中的数值：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Available = Available - Request </span><br><span class="line"></span><br><span class="line">Allocation[i]= Allocation[i]+ Request</span><br><span class="line"></span><br><span class="line">Need[i]= Need[i] - Request</span><br></pre></td></tr></table></figure>

<p>4． 系统执行安全性算法，检查此次资源分配后，系统是否处于安全状态。如果安全才正式将资源分配给进程i，以完成本次分配；否则，将试探分配作废，恢复原来的资源分配状态，让进程i等待。</p>
<h2 id="安全性测试算法"><a href="#安全性测试算法" class="headerlink" title="安全性测试算法"></a>安全性测试算法</h2><p>1． 设置两个向量。</p>
<p><code>Work</code>：它表示系统可提供给进程继续运行的各类资源数目，它包含m个元素，开始执行安全性算法时，<code>Work = Available</code></p>
<p><code>Finish</code>：它表示系统是否有足够的资源分配给进程，使之运行完成，开始Finish[i]=false；当有足够资源分配给进程i时，令<code>Finish[i]=true</code></p>
<p>2． 从进程集合中找到一个能满足下述条件的进程。</p>
<ul>
<li><code>Finish[i]= = false</code></li>
<li><code>Need[i]≤work</code></li>
</ul>
<p>如找到则执行步骤3；否则，执行步骤4；</p>
<p>3． 当进程i获得资源后，可顺利执行直到完成，并释放出分配给它的资源，故应执行</p>
<ul>
<li><code>Work = work + Allocation[i]</code></li>
<li><code>Finish[i]=true</code></li>
<li><code>转向步骤2</code></li>
</ul>
<p>4． 若所有进程的<code>Finish[i]</code>都为<code>true</code>，则表示系统处于安全状态；否则，系统处于不安全状态。</p>
<h2 id="实现代码"><a href="#实现代码" class="headerlink" title="实现代码"></a>实现代码</h2><p>好啦，关于概念和原理都讲清楚了，接下来贴上代码。</p>
<p>代码里已经写了详细的注释了，虽然是面向过程的写法，但是结构也很清晰。</p>
<p><strong>首先定义进程类</strong></p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">OperatingSystemExperiment.Exp3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ProcessExp3</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> Id;</span><br><span class="line"></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 进程最大（各类）资源需求数：信用额度</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span>[] Max;</span><br><span class="line"></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 已分配给进程的资源：贷款</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span>[] Allocation;</span><br><span class="line"></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 进程还需要的资源：信用额度 - 贷款</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span>[] Need;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ProcessExp3</span>(<span class="params"><span class="keyword">int</span> id</span>)</span> =&gt; <span class="keyword">this</span>.Id = id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">EvaluateNeedResource</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Need = <span class="keyword">new</span> <span class="keyword">int</span>[Max.Length];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; Max.Length; i++) &#123;</span><br><span class="line">                Need[i] = Max[i] - Allocation[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>算法实现代码：</strong></p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Diagnostics;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">OperatingSystemExperiment.Exp3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Main</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> _resourceClassesCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> _processCount = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> List&lt;ProcessExp3&gt; _processes = <span class="keyword">new</span> List&lt;ProcessExp3&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 系统全部可分配资源：银行流动资金</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="keyword">private</span> List&lt;<span class="keyword">int</span>&gt; _resource = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 系统剩余可分配资源</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="keyword">private</span> List&lt;<span class="keyword">int</span>&gt; _available = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="comment">// 获取当前系统资源分配状态</span></span><br><span class="line">            LoadAllAvailableResource();</span><br><span class="line">            LoadProcessMaxResource();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> continueFlag = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">while</span> (continueFlag) &#123;</span><br><span class="line">                mainLoop:</span><br><span class="line">                <span class="comment">// 获取各进程已分配资源</span></span><br><span class="line">                LoadAllocationResource();</span><br><span class="line">                <span class="comment">// 评估每个进程还需要的资源</span></span><br><span class="line">                EvaluateNeedResource();</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 打印各数据结构当前值</span></span><br><span class="line">                PrintStatus();</span><br><span class="line">                Console.Write(<span class="string">"请输入要操作的进程号："</span>);</span><br><span class="line">                <span class="keyword">if</span> (!<span class="keyword">int</span>.TryParse(Console.ReadLine(), <span class="keyword">out</span> <span class="keyword">var</span> procId)) &#123;</span><br><span class="line">                    Console.WriteLine(<span class="string">"\n请输入数字！"</span>);</span><br><span class="line">                    <span class="keyword">if</span> (QueryExit()) Environment.Exit(<span class="number">0</span>);</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">goto</span> mainLoop;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (procId &lt; <span class="number">0</span> || procId &gt;= _processes.Count) &#123;</span><br><span class="line">                    Console.WriteLine(<span class="string">"\n不存在进程号为 &#123;0&#125; 的进程！"</span>, procId);</span><br><span class="line">                    <span class="keyword">if</span> (QueryExit()) Environment.Exit(<span class="number">0</span>);</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">goto</span> mainLoop;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                Console.Write(<span class="string">"请输入资源请求向量："</span>);</span><br><span class="line">                <span class="keyword">var</span> request = Console.ReadLine();</span><br><span class="line">                <span class="keyword">var</span> requestVector = Array.ConvertAll(request?.Split(<span class="string">' '</span>), <span class="keyword">int</span>.Parse);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 检查资源请求是否合理</span></span><br><span class="line">                <span class="keyword">var</span> proc = _processes[procId];</span><br><span class="line">                Console.WriteLine(<span class="string">"银行家算法检验中..."</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; requestVector.Length; i++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (requestVector[i] &gt; proc.Need[i]) &#123;</span><br><span class="line">                        Console.WriteLine(<span class="string">"分配失败！资源类型 &#123;0&#125;，请求数量 &#123;1&#125;，超过进程所需数量 &#123;2&#125;"</span>,</span><br><span class="line">                            i, requestVector[i], proc.Need[i]);</span><br><span class="line">                        <span class="keyword">if</span> (QueryExit()) Environment.Exit(<span class="number">0</span>);</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">goto</span> mainLoop;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (requestVector[i] &gt; proc.Max[i]) &#123;</span><br><span class="line">                        Console.WriteLine(<span class="string">"分配失败！资源类型 &#123;0&#125;，请求数量 &#123;1&#125;，超过进程最大资源数量 &#123;2&#125;"</span>,</span><br><span class="line">                            i, requestVector[i], proc.Need[i]);</span><br><span class="line">                        <span class="keyword">if</span> (QueryExit()) Environment.Exit(<span class="number">0</span>);</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">goto</span> mainLoop;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 保存当前状态</span></span><br><span class="line">                <span class="keyword">var</span> tempAvailable = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;(_available);</span><br><span class="line">                <span class="keyword">var</span> tempAllocation = (<span class="keyword">int</span>[]) proc.Allocation.Clone();</span><br><span class="line">                <span class="keyword">var</span> tempNeed = (<span class="keyword">int</span>[]) proc.Need.Clone();</span><br><span class="line">                <span class="comment">// 资源预分配</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; _resourceClassesCount; i++) &#123;</span><br><span class="line">                    proc.Allocation[i] += requestVector[i];</span><br><span class="line">                    proc.Need[i] -= requestVector[i];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (SecurityEvaluate()) &#123;</span><br><span class="line">                    Console.WriteLine(<span class="string">"正在为进程 &#123;0&#125; 分配资源"</span>, proc.Id);</span><br><span class="line">                    <span class="comment">// 写入资源分配文件</span></span><br><span class="line">                    <span class="keyword">var</span> writer = <span class="keyword">new</span> StreamWriter(Path.Combine(</span><br><span class="line">                        Environment.CurrentDirectory, <span class="string">"Exp3"</span>, <span class="string">"input"</span>, <span class="string">"Allocation_list.txt"</span>), <span class="literal">false</span>);</span><br><span class="line">                    <span class="keyword">foreach</span> (<span class="keyword">var</span> p <span class="keyword">in</span> _processes) &#123;</span><br><span class="line">                        <span class="comment">// 使用LinQ语句，构造输出行</span></span><br><span class="line">                        <span class="keyword">var</span> line = p.Allocation.Aggregate(<span class="string">""</span>, (current, allocation) =&gt; current + (allocation + <span class="string">" "</span>));</span><br><span class="line"></span><br><span class="line">                        writer.WriteLine(line.Trim());</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    Console.WriteLine(<span class="string">"已经保存新的分配状态！"</span>);</span><br><span class="line">                    writer.Close();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    Console.WriteLine(<span class="string">"恢复试分配前的状态。"</span>);</span><br><span class="line">                    <span class="comment">// 恢复预分配之前的状态</span></span><br><span class="line">                    _available = tempAvailable;</span><br><span class="line">                    proc.Allocation = tempAllocation;</span><br><span class="line">                    proc.Need = tempNeed;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                continueFlag = !QueryExit();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 安全性算法</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">bool</span> <span class="title">SecurityEvaluate</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">var</span> work = _available;</span><br><span class="line">            <span class="keyword">var</span> finish = <span class="keyword">new</span> <span class="keyword">bool</span>[_processCount];</span><br><span class="line">            <span class="keyword">var</span> found = <span class="literal">false</span>; <span class="comment">// 判断标志</span></span><br><span class="line">            <span class="keyword">var</span> finishCount = <span class="number">0</span>; <span class="comment">// 满足条件的进程数目</span></span><br><span class="line">            <span class="keyword">var</span> safeQueue = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (finishCount &lt; _processCount) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> procId = <span class="number">0</span>; procId &lt; _processCount; procId++) &#123;</span><br><span class="line">                    <span class="keyword">var</span> proc = _processes[procId];</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (!finish[procId]) &#123;</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">var</span> resId = <span class="number">0</span>; resId &lt; work.Count; resId++) &#123;</span><br><span class="line">                            Debug.WriteLine(<span class="string">"安全性测试，procId=&#123;0&#125; resId=(1)"</span>, procId, resId);</span><br><span class="line">                            <span class="keyword">if</span> (proc.Need[resId] &gt; work[resId]) &#123;</span><br><span class="line">                                Debug.WriteLine(<span class="string">"NotFound! procId=&#123;0&#125; resId=&#123;1&#125;"</span>, procId, resId);</span><br><span class="line">                                found = <span class="literal">false</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">else</span> &#123;</span><br><span class="line">                                Debug.WriteLine(<span class="string">"Found! procId=&#123;0&#125; resId=&#123;1&#125;"</span>, procId, resId);</span><br><span class="line">                                found = <span class="literal">true</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (found) &#123;</span><br><span class="line">                        <span class="comment">// 模拟释放资源</span></span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">var</span> t = <span class="number">0</span>; t &lt; work.Count; t++) &#123;</span><br><span class="line">                            work[t] += proc.Allocation[t];</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        <span class="comment">// 保存进程号</span></span><br><span class="line">                        finish[procId] = <span class="literal">true</span>;</span><br><span class="line">                        finishCount++;</span><br><span class="line">                        <span class="comment">// 加入安全队列</span></span><br><span class="line">                        safeQueue.Add(procId);</span><br><span class="line">                        <span class="comment">// 重置状态</span></span><br><span class="line">                        found = <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Console.WriteLine(<span class="string">"安全序列如下："</span>);</span><br><span class="line">            <span class="comment">// 打印安全序列</span></span><br><span class="line">            <span class="keyword">var</span> output = <span class="string">""</span>;</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> procId <span class="keyword">in</span> safeQueue) &#123;</span><br><span class="line">                output += <span class="string">"P"</span> + procId + <span class="string">","</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Console.WriteLine(output.TrimEnd(<span class="string">','</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (finish.Any(flag =&gt; !flag)) &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">"未通过安全性测试！"</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Console.WriteLine(<span class="string">"已经通过安全性测试！"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">bool</span> <span class="title">QueryExit</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.Write(<span class="string">"是否退出(y/n)？"</span>);</span><br><span class="line">            <span class="keyword">var</span> option = Console.ReadLine()?.ToLower();</span><br><span class="line">            <span class="keyword">return</span> option == <span class="string">"y"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 评估进程所需资源</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">EvaluateNeedResource</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> p <span class="keyword">in</span> _processes) &#123;</span><br><span class="line">                p.EvaluateNeedResource();</span><br><span class="line">                <span class="comment">// 计算系统还剩下多少资源</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; _resourceClassesCount; i++) &#123;</span><br><span class="line">                    _available[i] -= p.Allocation[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 打印出当前状态</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">PrintStatus</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">"-------------------------银行家算法-------------------------"</span>);</span><br><span class="line">            Console.WriteLine(<span class="string">"系统进程数量：&#123;0&#125;；资源种类数量：&#123;1&#125;"</span>, _processCount, _resourceClassesCount);</span><br><span class="line">            Console.WriteLine(<span class="string">"可用资源向量 Available："</span>);</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> i <span class="keyword">in</span> _resource) &#123;</span><br><span class="line">                Console.Write(<span class="string">"&#123;0&#125; "</span>, i);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Console.WriteLine(<span class="string">"\n最大需求矩阵 Max："</span>);</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> p <span class="keyword">in</span> _processes) &#123;</span><br><span class="line">                <span class="keyword">foreach</span> (<span class="keyword">var</span> t <span class="keyword">in</span> p.Max) &#123;</span><br><span class="line">                    Console.Write(<span class="string">"&#123;0&#125; "</span>, t);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                Console.WriteLine(<span class="string">""</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Console.WriteLine(<span class="string">"已分配矩阵 Allocation："</span>);</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> p <span class="keyword">in</span> _processes) &#123;</span><br><span class="line">                <span class="keyword">foreach</span> (<span class="keyword">var</span> t <span class="keyword">in</span> p.Allocation) &#123;</span><br><span class="line">                    Console.Write(<span class="string">"&#123;0&#125; "</span>, t);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                Console.WriteLine(<span class="string">""</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Console.WriteLine(<span class="string">"需求矩阵 Need："</span>);</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> p <span class="keyword">in</span> _processes) &#123;</span><br><span class="line">                <span class="keyword">foreach</span> (<span class="keyword">var</span> t <span class="keyword">in</span> p.Need) &#123;</span><br><span class="line">                    Console.Write(<span class="string">"&#123;0&#125; "</span>, t);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                Console.WriteLine(<span class="string">""</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 加载系统所有可用的资源数量</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">LoadAllAvailableResource</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">var</span> reader =</span><br><span class="line">                <span class="keyword">new</span> StreamReader(Path.Combine(Environment.CurrentDirectory, <span class="string">"Exp3"</span>, <span class="string">"input"</span>, <span class="string">"Available_list.txt"</span>));</span><br><span class="line">            <span class="keyword">var</span> line = reader.ReadLine();</span><br><span class="line">            <span class="comment">// 获取各类型资源数量</span></span><br><span class="line">            _resourceClassesCount = <span class="keyword">int</span>.Parse(line?.Trim());</span><br><span class="line">            line = reader.ReadLine();</span><br><span class="line">            _resource.AddRange(Array.ConvertAll(line?.Split(<span class="string">' '</span>), <span class="keyword">int</span>.Parse));</span><br><span class="line">            _available.AddRange(Array.ConvertAll(line?.Split(<span class="string">' '</span>), <span class="keyword">int</span>.Parse));</span><br><span class="line">            reader.Close();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 加载所有进程以及他们需要的最大资源</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">LoadProcessMaxResource</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">var</span> reader =</span><br><span class="line">                <span class="keyword">new</span> StreamReader(Path.Combine(Environment.CurrentDirectory, <span class="string">"Exp3"</span>, <span class="string">"input"</span>, <span class="string">"Max_list.txt"</span>));</span><br><span class="line">            <span class="keyword">var</span> line = reader.ReadLine();</span><br><span class="line">            <span class="keyword">var</span> index = <span class="number">0</span>;</span><br><span class="line">            _processCount = <span class="keyword">int</span>.Parse(line?.Trim());</span><br><span class="line">            <span class="keyword">while</span> (!reader.EndOfStream) &#123;</span><br><span class="line">                line = reader.ReadLine();</span><br><span class="line">                <span class="keyword">var</span> tempProc = <span class="keyword">new</span> ProcessExp3(index++) &#123;</span><br><span class="line">                    Max = Array.ConvertAll(line?.Split(<span class="string">' '</span>), <span class="keyword">int</span>.Parse)</span><br><span class="line">                &#125;;</span><br><span class="line">                _processes.Add(tempProc);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            reader.Close();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 获取所有进程已经分配的资源</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">LoadAllocationResource</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">var</span> reader = <span class="keyword">new</span> StreamReader(Path.Combine(</span><br><span class="line">                Environment.CurrentDirectory, <span class="string">"Exp3"</span>, <span class="string">"input"</span>, <span class="string">"Allocation_list.txt"</span>));</span><br><span class="line">            <span class="keyword">var</span> index = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> line = reader.ReadLine()?.Trim();</span><br><span class="line">                _processes[index++].Allocation = Array.ConvertAll(line?.Split(<span class="string">' '</span>), <span class="keyword">int</span>.Parse);</span><br><span class="line">            &#125; <span class="keyword">while</span> (!reader.EndOfStream);</span><br><span class="line"></span><br><span class="line">            reader.Close();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">EvaluateProcessNeedResource</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">new</span> Main();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>PS：这个代码里面没有包括<code>Program</code>类，要运行代码的话，需要加上<code>Program</code>类，在<code>Main</code>方法里调用<code>Exp3.Main.Run();</code></strong></p>
<h2 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">## </span><br><span class="line"></span><br><span class="line">系统进程数量：<span class="number">5</span>；资源种类数量：<span class="number">3</span></span><br><span class="line">可用资源向量 Available：</span><br><span class="line"><span class="number">10</span> <span class="number">5</span> <span class="number">7</span> </span><br><span class="line">最大需求矩阵 Max：</span><br><span class="line"><span class="number">7</span> <span class="number">5</span> <span class="number">3</span> </span><br><span class="line"><span class="number">3</span> <span class="number">2</span> <span class="number">2</span> </span><br><span class="line"><span class="number">9</span> <span class="number">0</span> <span class="number">2</span> </span><br><span class="line"><span class="number">2</span> <span class="number">2</span> <span class="number">2</span> </span><br><span class="line"><span class="number">4</span> <span class="number">3</span> <span class="number">3</span> </span><br><span class="line">已分配矩阵 Allocation：</span><br><span class="line"><span class="number">2</span> <span class="number">3</span> <span class="number">2</span> </span><br><span class="line"><span class="number">2</span> <span class="number">0</span> <span class="number">0</span> </span><br><span class="line"><span class="number">3</span> <span class="number">0</span> <span class="number">2</span> </span><br><span class="line"><span class="number">2</span> <span class="number">1</span> <span class="number">1</span> </span><br><span class="line"><span class="number">0</span> <span class="number">0</span> <span class="number">2</span> </span><br><span class="line">需求矩阵 Need：</span><br><span class="line"><span class="number">5</span> <span class="number">2</span> <span class="number">1</span> </span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">2</span> </span><br><span class="line"><span class="number">6</span> <span class="number">0</span> <span class="number">0</span> </span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">1</span> </span><br><span class="line"><span class="number">4</span> <span class="number">3</span> <span class="number">1</span> </span><br><span class="line">请输入要操作的进程号：<span class="number">0</span></span><br><span class="line">请输入资源请求向量：<span class="number">1</span> <span class="number">1</span> <span class="number">1</span></span><br><span class="line">银行家算法检验中...</span><br><span class="line">安全序列如下：</span><br><span class="line">P0,P1,P2,P3,P4</span><br><span class="line">已经通过安全性测试！</span><br><span class="line">正在为进程 <span class="number">0</span> 分配资源</span><br><span class="line">已经保存新的分配状态！</span><br></pre></td></tr></table></figure>

<p>重新分配之后的状态：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">-------------------------银行家算法-------------------------</span><br><span class="line">系统进程数量：<span class="number">5</span>；资源种类数量：<span class="number">3</span></span><br><span class="line">可用资源向量 Available：</span><br><span class="line"><span class="number">10</span> <span class="number">5</span> <span class="number">7</span> </span><br><span class="line">最大需求矩阵 Max：</span><br><span class="line"><span class="number">7</span> <span class="number">5</span> <span class="number">3</span> </span><br><span class="line"><span class="number">3</span> <span class="number">2</span> <span class="number">2</span> </span><br><span class="line"><span class="number">9</span> <span class="number">0</span> <span class="number">2</span> </span><br><span class="line"><span class="number">2</span> <span class="number">2</span> <span class="number">2</span> </span><br><span class="line"><span class="number">4</span> <span class="number">3</span> <span class="number">3</span> </span><br><span class="line">已分配矩阵 Allocation：</span><br><span class="line"><span class="number">3</span> <span class="number">4</span> <span class="number">3</span> </span><br><span class="line"><span class="number">2</span> <span class="number">0</span> <span class="number">0</span> </span><br><span class="line"><span class="number">3</span> <span class="number">0</span> <span class="number">2</span> </span><br><span class="line"><span class="number">2</span> <span class="number">1</span> <span class="number">1</span> </span><br><span class="line"><span class="number">0</span> <span class="number">0</span> <span class="number">2</span> </span><br><span class="line">需求矩阵 Need：</span><br><span class="line"><span class="number">4</span> <span class="number">1</span> <span class="number">0</span> </span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">2</span> </span><br><span class="line"><span class="number">6</span> <span class="number">0</span> <span class="number">0</span> </span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">1</span> </span><br><span class="line"><span class="number">4</span> <span class="number">3</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>


<h2 id="欢迎交流"><a href="#欢迎交流" class="headerlink" title="欢迎交流"></a>欢迎交流</h2><p>交流问题请在微信公众号后台留言，每一条信息我都会回复哈~</p>
<ul>
<li>微信公众号：画星星高手</li>
<li>打代码直播间：<a href="https://live.bilibili.com/11883038" target="_blank" rel="noopener">https://live.bilibili.com/11883038</a></li>
<li>知乎：<a href="https://www.zhihu.com/people/dealiaxy" target="_blank" rel="noopener">https://www.zhihu.com/people/dealiaxy</a></li>
<li>专栏：<a href="https://zhuanlan.zhihu.com/deali" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/deali</a></li>
<li>简书：<a href="https://www.jianshu.com/u/965b95853b9f" target="_blank" rel="noopener">https://www.jianshu.com/u/965b95853b9f</a></li>
</ul>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2020-03-02T04:00:51.259Z" itemprop="dateUpdated">2020-03-02 12:00:51</time>
</span><br>


        
        <br />喜欢看技术文可以关注公众号【程序设计实验室】<br /><br />想看我的生活分享可以关注公众号【画星星高手】
        
    </div>
    
    <footer>
        <a href="http://blog.deali.cn">
            <img src="/img/avatar.jpg" alt="画星星高手">
            画星星高手
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0/" rel="tag">学习</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%9E%E7%8E%B0/" rel="tag">实现</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%AD%BB%E9%94%81/" rel="tag">死锁</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%B0%83%E5%BA%A6/" rel="tag">调度</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BF%9B%E7%A8%8B/" rel="tag">进程</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%81%BF%E5%85%8D/" rel="tag">避免</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%93%B6%E8%A1%8C%E5%AE%B6/" rel="tag">银行家</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.deali.cn/posts/1e6223ee42e53b10.html&title=《操作系统学习三：进程调度与死锁-以及银行家算法避免死锁--NetCore实现》 — 画星星高手&pic=http://blog.deali.cn/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.deali.cn/posts/1e6223ee42e53b10.html&title=《操作系统学习三：进程调度与死锁-以及银行家算法避免死锁--NetCore实现》 — 画星星高手&source=画星星高手，DealiAxy的个人博客，微信公众号1：画星星高手，公众号2：程序设计实验室" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.deali.cn/posts/1e6223ee42e53b10.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《操作系统学习三：进程调度与死锁-以及银行家算法避免死锁--NetCore实现》 — 画星星高手&url=http://blog.deali.cn/posts/1e6223ee42e53b10.html&via=http://blog.deali.cn" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.deali.cn/posts/1e6223ee42e53b10.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/posts/309b401772d65bbc.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Ubuntu-18-04-修复-Telegram-中文输入法</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/posts/7748159d9765a229.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">初读《围城》</h4>
      </a>
    </div>
  
</nav>



    




















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        微信公众号
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license noopener" href="https://creativecommons.org/licenses/by/4.0/" target="_blank">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>画星星高手 &copy; 2015 - 2020</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.deali.cn/posts/1e6223ee42e53b10.html&title=《操作系统学习三：进程调度与死锁-以及银行家算法避免死锁--NetCore实现》 — 画星星高手&pic=http://blog.deali.cn/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.deali.cn/posts/1e6223ee42e53b10.html&title=《操作系统学习三：进程调度与死锁-以及银行家算法避免死锁--NetCore实现》 — 画星星高手&source=画星星高手，DealiAxy的个人博客，微信公众号1：画星星高手，公众号2：程序设计实验室" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.deali.cn/posts/1e6223ee42e53b10.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《操作系统学习三：进程调度与死锁-以及银行家算法避免死锁--NetCore实现》 — 画星星高手&url=http://blog.deali.cn/posts/1e6223ee42e53b10.html&via=http://blog.deali.cn" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.deali.cn/posts/1e6223ee42e53b10.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACNUlEQVR42u3ay47CMBBE0fz/T4ctEmCqqm0pbl+vEEMSnyx6+uHrktf9trLv9d98/nLaggEDxraMe7iUBygPzsDK3mDAgHEOY7w55TE6SXmJ+t5gwIABI/ush9rKPWHAgAHDDbJKQqmkmDBgwIBRKWIryV/9lU2rxWHAgLEho7KV1Z+XzDdgwICxFeM2V9Ysy1JDY1cwYMBozcgGkHriqCR50waiMGDAOJLhjif1VC9r5JW6hjBgwGjBcFta+lXZtpSX+CXgwoAB4wCGMpJUAu74PlnwNZpuMGDAaMQwwplwrZvY6U23P3+FAQNGa0aW8GWHHoxyNGrAwYABoytDD4VuK80dHpRGCDBgwDiAoY8ns1inN+/c9hwMGDBOYCgBtD7O1INsqXkHAwaMAxh6mZoFxCwNNWpxGDBgNGW4jTN7OloYBihl8M8MFwYMGI0YWcMrC6NKANVDbZgawoABY0OG247PmmtZADWOYsCAAaM1Y+6RCxdZL5KXnByBAQPGIxnKpsOs07zWLY9/FrEwYMBozdDDors5JXBXvoEBA8YJjGzMOSZlLTw3bYUBA0Zvxm0u/aiEewe3PWfEdRgwYGzOyI5KSIma2T7TQ3bp2AcMGDC2ZeilppLwuWWwG4hLgwEYMGBszsjK0azdX/kPYNfiMGDAOJLhDjLdkUBYssKAAQOGeb6snmgqY4mFARcGDBiPZOgNtUrLLEz75rbbYMCAsSFjVt6VFa7uqHJ5+ggDBoxnMV7VaUupNaxjHAAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '死鬼去哪里了！';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)咦!又好了!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
